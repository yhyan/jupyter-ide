(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[2156],{52156:(e,t,s)=>{"use strict";s.r(t);s.d(t,{LogLevelSwitcher:()=>y,default:()=>w});var o=s(20650);var l=s(26825);var n=s(68269);var a=s(3860);var i=s(72805);var r=s(68992);var d=s(10314);var c=s(1612);var g=s(92481);var h=s(9727);var u=s(2411);var m=s.n(u);var _=s(75138);function f(e){const t=e.translator||c.nullTranslator;const s=t.load("jupyterlab");let o="";if(e.newMessages>0){o=s.__("%1 new messages, %2 log entries for %3",e.newMessages,e.logEntries,e.source)}else{o+=s.__("%1 log entries for %2",e.logEntries,e.source)}return m().createElement(d.GroupItem,{spacing:0,onClick:e.handleClick,title:o},m().createElement(g.listIcon.react,{top:"2px",stylesheet:"statusBar"}),e.newMessages>0?m().createElement(d.TextItem,{source:e.newMessages}):m().createElement(m().Fragment,null))}class v extends l.VDomRenderer{constructor(e){super(new v.Model(e.loggerRegistry));this.translator=e.translator||c.nullTranslator;this._handleClick=e.handleClick;this.addClass(d.interactiveItem);this.addClass("jp-LogConsoleStatusItem")}render(){if(this.model===null||this.model.version===0){return null}const{flashEnabled:e,messages:t,source:s,version:o,versionDisplayed:l,versionNotified:n}=this.model;if(s!==null&&e&&o>n){this._flashHighlight();this.model.sourceNotified(s,o)}else if(s!==null&&e&&o>l){this._showHighlighted()}else{this._clearHighlight()}return m().createElement(f,{handleClick:this._handleClick,logEntries:t,newMessages:o-l,source:this.model.source,translator:this.translator})}_flashHighlight(){this._showHighlighted();this.removeClass("jp-LogConsole-flash");requestAnimationFrame((()=>{this.addClass("jp-LogConsole-flash")}))}_showHighlighted(){this.addClass("jp-mod-selected")}_clearHighlight(){this.removeClass("jp-LogConsole-flash");this.removeClass("jp-mod-selected")}}(function(e){class t extends l.VDomModel{constructor(e){super();this.flashEnabledChanged=new _.Signal(this);this._flashEnabled=true;this._source=null;this._sourceVersion=new Map;this._loggerRegistry=e;this._loggerRegistry.registryChanged.connect(this._handleLogRegistryChange,this);this._handleLogRegistryChange()}get messages(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.length}get version(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.version}get source(){return this._source}set source(e){if(this._source===e){return}this._source=e;this.stateChanged.emit()}get versionDisplayed(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastDisplayed)!==null&&t!==void 0?t:0}get versionNotified(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastNotified)!==null&&t!==void 0?t:0}get flashEnabled(){return this._flashEnabled}set flashEnabled(e){if(this._flashEnabled===e){return}this._flashEnabled=e;this.flashEnabledChanged.emit();this.stateChanged.emit()}sourceDisplayed(e,t){if(e===null||t===null){return}const s=this._sourceVersion.get(e);let o=false;if(s.lastDisplayed<t){s.lastDisplayed=t;o=true}if(s.lastNotified<t){s.lastNotified=t;o=true}if(o&&e===this._source){this.stateChanged.emit()}}sourceNotified(e,t){if(e===null){return}const s=this._sourceVersion.get(e);if(s.lastNotified<t){s.lastNotified=t;if(e===this._source){this.stateChanged.emit()}}}_handleLogRegistryChange(){const e=this._loggerRegistry.getLoggers();for(const t of e){if(!this._sourceVersion.has(t.source)){t.contentChanged.connect(this._handleLogContentChange,this);this._sourceVersion.set(t.source,{lastDisplayed:0,lastNotified:0})}}}_handleLogContentChange({source:e},t){if(e===this._source){this.stateChanged.emit()}}}e.Model=t})(v||(v={}));const C="@jupyterlab/logconsole-extension:plugin";var p;(function(e){e.addCheckpoint="logconsole:add-checkpoint";e.clear="logconsole:clear";e.open="logconsole:open";e.setLevel="logconsole:set-level"})(p||(p={}));const b={activate:L,id:C,provides:n.ILoggerRegistry,requires:[o.ILabShell,i.IRenderMimeRegistry,a.INotebookTracker,c.ITranslator],optional:[l.ICommandPalette,o.ILayoutRestorer,r.ISettingRegistry,d.IStatusBar],autoStart:true};function L(e,t,s,o,a,i,r,d,c){const h=a.load("jupyterlab");let u=null;let m=null;const _=new n.LoggerRegistry({defaultRendermime:s,maxLength:1e3});const f=new l.WidgetTracker({namespace:"logconsole"});if(r){void r.restore(f,{command:p.open,name:()=>"logconsole"})}const b=new v({loggerRegistry:_,handleClick:()=>{var t;if(!u){L({insertMode:"split-bottom",ref:(t=e.shell.currentWidget)===null||t===void 0?void 0:t.id})}else{e.shell.activateById(u.id)}},translator:a});const L=(t={})=>{m=new n.LogConsolePanel(_,a);m.source=t.source!==undefined?t.source:o.currentWidget?o.currentWidget.context.path:null;u=new l.MainAreaWidget({content:m});u.addClass("jp-LogConsole");u.title.closable=true;u.title.icon=g.listIcon;u.title.label=h.__("Log Console");const s=new l.CommandToolbarButton({commands:e.commands,id:p.addCheckpoint});const i=new l.CommandToolbarButton({commands:e.commands,id:p.clear});u.toolbar.addItem("lab-log-console-add-checkpoint",s);u.toolbar.addItem("lab-log-console-clear",i);u.toolbar.addItem("level",new y(u.content,a));m.sourceChanged.connect((()=>{e.commands.notifyCommandChanged()}));m.sourceDisplayed.connect(((e,{source:t,version:s})=>{b.model.sourceDisplayed(t,s)}));u.disposed.connect((()=>{u=null;m=null;e.commands.notifyCommandChanged()}));e.shell.add(u,"down",{ref:t.ref,mode:t.insertMode});void f.add(u);e.shell.activateById(u.id);u.update();e.commands.notifyCommandChanged()};e.commands.addCommand(p.open,{label:h.__("Show Log Console"),execute:(e={})=>{if(u){u.dispose()}else{L(e)}},isToggled:()=>u!==null});e.commands.addCommand(p.addCheckpoint,{execute:()=>{var e;(e=m===null||m===void 0?void 0:m.logger)===null||e===void 0?void 0:e.checkpoint()},icon:g.addIcon,isEnabled:()=>!!m&&m.source!==null,label:h.__("Add Checkpoint")});e.commands.addCommand(p.clear,{execute:()=>{var e;(e=m===null||m===void 0?void 0:m.logger)===null||e===void 0?void 0:e.clear()},icon:g.clearIcon,isEnabled:()=>!!m&&m.source!==null,label:h.__("Clear Log")});function w(e){return e.length===0?e:e[0].toUpperCase()+e.slice(1)}e.commands.addCommand(p.setLevel,{execute:e=>{if(m===null||m===void 0?void 0:m.logger){m.logger.level=e.level}},isEnabled:()=>!!m&&m.source!==null,label:e=>h.__("Set Log Level to %1",w(e.level))});if(i){i.addItem({command:p.open,category:h.__("Main Area")})}if(c){c.registerStatusItem("@jupyterlab/logconsole-extension:status",{item:b,align:"left",isActive:()=>{var e;return((e=b.model)===null||e===void 0?void 0:e.version)>0},activeStateChanged:b.model.stateChanged})}function E(e){if(u&&e===u){return}let t;if(e&&o.has(e)){t=e.context.path}else{t=null}if(m){m.source=t}b.model.source=t}void e.restored.then((()=>{E(t.currentWidget);t.currentChanged.connect(((e,{newValue:t})=>E(t)))}));if(d){const t=e=>{_.maxLength=e.get("maxLogEntries").composite;b.model.flashEnabled=e.get("flash").composite};Promise.all([d.load(C),e.restored]).then((([e])=>{t(e);e.changed.connect((e=>{t(e)}))})).catch((e=>{console.error(e.message)}))}return _}class y extends l.ReactWidget{constructor(e,t){super();this.handleChange=e=>{if(this._logConsole.logger){this._logConsole.logger.level=e.target.value}this.update()};this.handleKeyDown=e=>{if(e.keyCode===13){this._logConsole.activate()}};this._id=`level-${h.UUID.uuid4()}`;this.translator=t||c.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass("jp-LogConsole-toolbarLogLevel");this._logConsole=e;if(e.source){this.update()}e.sourceChanged.connect(this._updateSource,this)}_updateSource(e,{oldValue:t,newValue:s}){if(t!==null){const s=e.loggerRegistry.getLogger(t);s.stateChanged.disconnect(this.update,this)}if(s!==null){const t=e.loggerRegistry.getLogger(s);t.stateChanged.connect(this.update,this)}this.update()}render(){const e=this._logConsole.logger;return u.createElement(u.Fragment,null,u.createElement("label",{htmlFor:this._id,className:e===null?"jp-LogConsole-toolbarLogLevel-disabled":undefined},this._trans.__("Log Level:")),u.createElement(g.HTMLSelect,{id:this._id,className:"jp-LogConsole-toolbarLogLevelDropdown",onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:e===null||e===void 0?void 0:e.level,"aria-label":this._trans.__("Log level"),disabled:e===null,options:e===null?[]:[[this._trans.__("Critical"),"Critical"],[this._trans.__("Error"),"Error"],[this._trans.__("Warning"),"Warning"],[this._trans.__("Info"),"Info"],[this._trans.__("Debug"),"Debug"]].map((e=>({label:e[0],value:e[1].toLowerCase()})))}))}}const w=b}}]);