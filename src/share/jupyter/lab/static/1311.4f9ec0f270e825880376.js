(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[1311],{31311:(e,t,i)=>{"use strict";i.r(t);i.d(t,{ConnectionLost:()=>r,IConnectionLost:()=>q,ILabShell:()=>E,ILabStatus:()=>z,ILayoutRestorer:()=>y,IMimeDocumentTracker:()=>b,IRouter:()=>U,ITreePathUpdater:()=>V,JupyterFrontEnd:()=>u,JupyterFrontEndContextMenu:()=>g,JupyterLab:()=>N,LabShell:()=>O,LayoutRestorer:()=>v,Router:()=>$,createRendermimePlugin:()=>C,createRendermimePlugins:()=>k});var n=i(26825);var s=i(1612);const r=async function(e,t,i){i=i||s.nullTranslator;const r=i.load("jupyterlab");const a=r.__("Server Connection Error");const o=r.__("A connection to the Jupyter server could not be established.\n"+"JupyterLab will continue trying to reconnect.\n"+"Check your network connection or Jupyter server configuration.\n");return(0,n.showErrorMessage)(a,{message:o})};var a=i(56052);var o=i(50317);var d=i(92481);var l=i(12131);var c=i(9727);var h=i(75138);class u extends l.Application{constructor(e){super(e);this._formatChanged=new h.Signal(this);this.contextMenu=new d.ContextMenuSvg({commands:this.commands,renderer:e.contextMenuRenderer});const t=new Promise((e=>{requestAnimationFrame((()=>{e()}))}));this.commandLinker=e.commandLinker||new n.CommandLinker({commands:this.commands});this.docRegistry=e.docRegistry||new a.DocumentRegistry;this.restored=e.restored||this.started.then((()=>t)).catch((()=>t));this.serviceManager=e.serviceManager||new o.ServiceManager}get format(){return this._format}set format(e){if(this._format!==e){this._format=e;document.body.dataset["format"]=e;this._formatChanged.emit(e)}}get formatChanged(){return this._formatChanged}contextMenuHitTest(e){if(!this._contextMenuEvent||!(this._contextMenuEvent.target instanceof Node)){return undefined}let t=this._contextMenuEvent.target;do{if(t instanceof HTMLElement&&e(t)){return t}t=t.parentNode}while(t&&t.parentNode&&t!==t.parentNode);return undefined}evtContextMenu(e){this._contextMenuEvent=e;if(e.shiftKey||p.suppressContextMenu(e.target)){return}const t=this.contextMenu.open(e);if(t){const t=this.contextMenu.menu.items;if(t.length===1&&t[0].command===g.contextMenu){this.contextMenu.menu.close();return}e.preventDefault();e.stopPropagation()}}}(function(e){function t(e,t){const i=new RegExp(`^${t.urls.doc}`);const n=e.match(i);if(n){return true}else{return false}}e.inDocMode=t;e.IPaths=new c.Token("@jupyterlab/application:IPaths");e.ITreeResolver=new c.Token("@jupyterlab/application:ITreeResolver")})(u||(u={}));var p;(function(e){function t(e){return e.closest("[data-jp-suppress-context-menu]")!==null}e.suppressContextMenu=t})(p||(p={}));var g;(function(e){e.contextMenu="__internal:context-menu-info"})(g||(g={}));var f=i(83875);var _=i(72805);var m=i(72189);const y=new c.Token("@jupyterlab/application:ILayoutRestorer");const w="layout-restorer:data";class v{constructor(e){this._firstDone=false;this._promisesDone=false;this._promises=[];this._restored=new c.PromiseDelegate;this._trackers=new Set;this._widgets=new Map;this._connector=e.connector;this._first=e.first;this._registry=e.registry;void this._first.then((()=>{this._firstDone=true})).then((()=>Promise.all(this._promises))).then((()=>{this._promisesDone=true;this._trackers.clear()})).then((()=>{this._restored.resolve(void 0)}))}get restored(){return this._restored.promise}add(e,t){P.nameProperty.set(e,t);this._widgets.set(t,e);e.disposed.connect(this._onWidgetDisposed,this)}async fetch(){const e={fresh:true,mainArea:null,downArea:null,leftArea:null,rightArea:null,relativeSizes:null};const t=this._connector.fetch(w);try{const[i]=await Promise.all([t,this.restored]);if(!i){return e}const{main:n,down:s,left:r,right:a,relativeSizes:o}=i;const d=false;const l=this._rehydrateMainArea(n);const c=this._rehydrateDownArea(s);const h=this._rehydrateSideArea(r);const u=this._rehydrateSideArea(a);return{fresh:d,mainArea:l,downArea:c,leftArea:h,rightArea:u,relativeSizes:o||null}}catch(i){return e}}restore(e,t){const i="restore() can only be called before `first` has resolved.";if(this._firstDone){console.warn(i);return Promise.reject(i)}const{namespace:n}=e;if(this._trackers.has(n)){const e=`A tracker namespaced ${n} was already restored.`;console.warn(e);return Promise.reject(e)}const{args:s,command:r,name:a,when:o}=t;this._trackers.add(n);e.widgetAdded.connect(((e,t)=>{const i=a(t);if(i){this.add(t,`${n}:${i}`)}}),this);e.widgetUpdated.connect(((e,t)=>{const i=a(t);if(i){const e=`${n}:${i}`;P.nameProperty.set(t,e);this._widgets.set(e,t)}}));const d=this._first;const l=e.restore({args:s||(()=>c.JSONExt.emptyObject),command:r,connector:this._connector,name:a,registry:this._registry,when:o?[d].concat(o):d}).catch((e=>{console.error(e)}));this._promises.push(l);return l}save(e){if(!this._promisesDone){const e="save() was called prematurely.";console.warn(e);return Promise.reject(e)}const t={};t.main=this._dehydrateMainArea(e.mainArea);t.down=this._dehydrateDownArea(e.downArea);t.left=this._dehydrateSideArea(e.leftArea);t.right=this._dehydrateSideArea(e.rightArea);t.relativeSizes=e.relativeSizes;return this._connector.save(w,t)}_dehydrateMainArea(e){if(!e){return null}return P.serializeMain(e)}_rehydrateMainArea(e){if(!e){return null}return P.deserializeMain(e,this._widgets)}_dehydrateDownArea(e){if(!e){return null}const t={size:e.size};if(e.currentWidget){const i=P.nameProperty.get(e.currentWidget);if(i){t.current=i}}if(e.widgets){t.widgets=e.widgets.map((e=>P.nameProperty.get(e))).filter((e=>!!e))}return t}_rehydrateDownArea(e){var t;if(!e){return{currentWidget:null,size:0,widgets:null}}const i=this._widgets;const n=e.current&&i.has(`${e.current}`)?i.get(`${e.current}`):null;const s=!Array.isArray(e.widgets)?null:e.widgets.map((e=>i.has(`${e}`)?i.get(`${e}`):null)).filter((e=>!!e));return{currentWidget:n,size:(t=e.size)!==null&&t!==void 0?t:0,widgets:s}}_dehydrateSideArea(e){if(!e){return null}const t={collapsed:e.collapsed};if(e.currentWidget){const i=P.nameProperty.get(e.currentWidget);if(i){t.current=i}}if(e.widgets){t.widgets=e.widgets.map((e=>P.nameProperty.get(e))).filter((e=>!!e))}return t}_rehydrateSideArea(e){var t;if(!e){return{collapsed:true,currentWidget:null,widgets:null}}const i=this._widgets;const n=(t=e.collapsed)!==null&&t!==void 0?t:false;const s=e.current&&i.has(`${e.current}`)?i.get(`${e.current}`):null;const r=!Array.isArray(e.widgets)?null:e.widgets.map((e=>i.has(`${e}`)?i.get(`${e}`):null)).filter((e=>!!e));return{collapsed:n,currentWidget:s,widgets:r}}_onWidgetDisposed(e){const t=P.nameProperty.get(e);this._widgets.delete(t)}}var P;(function(e){e.nameProperty=new m.AttachedProperty({name:"name",create:e=>""});function t(i){if(!i||!i.type){return null}if(i.type==="tab-area"){return{type:"tab-area",currentIndex:i.currentIndex,widgets:i.widgets.map((t=>e.nameProperty.get(t))).filter((e=>!!e))}}return{type:"split-area",orientation:i.orientation,sizes:i.sizes,children:i.children.map(t).filter((e=>!!e))}}function i(i){const n={dock:i&&i.dock&&t(i.dock.main)||null};if(i){if(i.currentWidget){const t=e.nameProperty.get(i.currentWidget);if(t){n.current=t}}}return n}e.serializeMain=i;function n(e,t){if(!e){return null}const i=e.type||"unknown";if(i==="unknown"||i!=="tab-area"&&i!=="split-area"){console.warn(`Attempted to deserialize unknown type: ${i}`);return null}if(i==="tab-area"){const{currentIndex:i,widgets:n}=e;const s={type:"tab-area",currentIndex:i||0,widgets:n&&n.map((e=>t.get(e))).filter((e=>!!e))||[]};if(s.currentIndex>s.widgets.length-1){s.currentIndex=0}return s}const{orientation:s,sizes:r,children:a}=e;const o={type:"split-area",orientation:s,sizes:r||[],children:a&&a.map((e=>n(e,t))).filter((e=>!!e))||[]};return o}function s(e,t){if(!e){return null}const i=e.current||null;const s=e.dock||null;return{currentWidget:i&&t.has(i)&&t.get(i)||null,dock:s?{main:n(s,t)}:null}}e.deserializeMain=s})(P||(P={}));const b=new c.Token("@jupyterlab/application:IMimeDocumentTracker");function k(e){const t=[];const i="application-mimedocuments";const s=new n.WidgetTracker({namespace:i});e.forEach((e=>{let i=e.default;if(!e.hasOwnProperty("__esModule")){i=e}if(!Array.isArray(i)){i=[i]}i.forEach((e=>{t.push(C(s,e))}))}));t.push({id:"@jupyterlab/application:mimedocument",optional:[y],provides:b,autoStart:true,activate:(e,t)=>{if(t){void t.restore(s,{command:"docmanager:open",args:e=>({path:e.context.path,factory:A.factoryNameProperty.get(e)}),name:e=>`${e.context.path}:${A.factoryNameProperty.get(e)}`})}return s}});return t}function C(e,t){return{id:t.id,requires:[_.IRenderMimeRegistry,s.ITranslator],autoStart:true,activate:(i,n,s)=>{if(t.rank!==undefined){n.addFactory(t.rendererFactory,t.rank)}else{n.addFactory(t.rendererFactory)}if(!t.documentWidgetFactoryOptions){return}const r=i.docRegistry;let o=[];if(Array.isArray(t.documentWidgetFactoryOptions)){o=t.documentWidgetFactoryOptions}else{o=[t.documentWidgetFactoryOptions]}if(t.fileTypes){t.fileTypes.forEach((e=>{if(e.icon){e=Object.assign(Object.assign({},e),{icon:d.LabIcon.resolve({icon:e.icon})})}i.docRegistry.addFileType(e)}))}o.forEach((i=>{const o=i.toolbarFactory?e=>i.toolbarFactory(e.content.renderer):undefined;const d=new a.MimeDocumentFactory({renderTimeout:t.renderTimeout,dataType:t.dataType,rendermime:n,modelName:i.modelName,name:i.name,primaryFileType:r.getFileType(i.primaryFileType),fileTypes:i.fileTypes,defaultFor:i.defaultFor,defaultRendered:i.defaultRendered,toolbarFactory:o,translator:s,factory:t.rendererFactory});r.addWidgetFactory(d);d.widgetCreated.connect(((t,i)=>{A.factoryNameProperty.set(i,d.name);i.context.pathChanged.connect((()=>{void e.save(i)}));void e.add(i)}))}))}}}var A;(function(e){e.factoryNameProperty=new m.AttachedProperty({name:"factoryName",create:()=>undefined})})(A||(A={}));var T=i(62867);var B=i(32151);var x=i(87598);var W=i(61389);const S="jp-LabShell";const M="jp-SideBar";const L="jp-mod-current";const H="jp-mod-active";const j=900;const I="jp-Activity";const E=new c.Token("@jupyterlab/application:ILabShell");class O extends W.Widget{constructor(e){super();this._dockChildHook=(e,t)=>{switch(t.type){case"child-added":t.child.addClass(I);this._tracker.add(t.child);break;case"child-removed":t.child.removeClass(I);this._tracker.remove(t.child);break;default:break}return true};this._activeChanged=new h.Signal(this);this._cachedLayout=null;this._currentChanged=new h.Signal(this);this._currentPath="";this._currentPathChanged=new h.Signal(this);this._modeChanged=new h.Signal(this);this._isRestored=false;this._layoutModified=new h.Signal(this);this._layoutDebouncer=new x.Debouncer((()=>{this._layoutModified.emit(undefined)}),0);this._restored=new c.PromiseDelegate;this._tracker=new W.FocusTracker;this._mainOptionsCache=new Map;this._sideOptionsCache=new Map;this.addClass(S);this.id="main";const t=(e&&e.translator||s.nullTranslator).load("jupyterlab");const i=this._headerPanel=new W.BoxPanel;const n=this._menuHandler=new D.PanelHandler;n.panel.node.setAttribute("role","navigation");n.panel.node.setAttribute("aria-label",t.__("main"));const r=this._topHandler=new D.PanelHandler;r.panel.node.setAttribute("role","banner");const o=this._bottomPanel=new W.BoxPanel;o.node.setAttribute("role","contentinfo");const l=new W.BoxPanel;const u=this._vsplitPanel=new D.RestorableSplitPanel;const p=this._dockPanel=new d.DockPanelSvg;B.MessageLoop.installMessageHook(p,this._dockChildHook);const g=this._hsplitPanel=new D.RestorableSplitPanel;const f=this._downPanel=new d.TabPanelSvg({tabsMovable:true});const _=this._leftHandler=new D.SideBarHandler;const m=this._rightHandler=new D.SideBarHandler;const y=new W.BoxLayout;i.id="jp-header-panel";n.panel.id="jp-menu-panel";r.panel.id="jp-top-panel";o.id="jp-bottom-panel";l.id="jp-main-content-panel";u.id="jp-main-vsplit-panel";p.id="jp-main-dock-panel";g.id="jp-main-split-panel";f.id="jp-down-stack";_.sideBar.addClass(M);_.sideBar.addClass("jp-mod-left");_.sideBar.node.setAttribute("aria-label",t.__("main sidebar"));_.sideBar.contentNode.setAttribute("aria-label",t.__("main sidebar"));_.sideBar.node.setAttribute("role","complementary");_.stackedPanel.id="jp-left-stack";m.sideBar.addClass(M);m.sideBar.addClass("jp-mod-right");m.sideBar.node.setAttribute("aria-label",t.__("alternate sidebar"));m.sideBar.contentNode.setAttribute("aria-label",t.__("alternate sidebar"));m.sideBar.node.setAttribute("role","complementary");m.stackedPanel.id="jp-right-stack";p.node.setAttribute("role","main");l.spacing=0;u.spacing=1;p.spacing=5;g.spacing=1;i.direction="top-to-bottom";u.orientation="vertical";l.direction="left-to-right";g.orientation="horizontal";o.direction="bottom-to-top";W.SplitPanel.setStretch(_.stackedPanel,0);W.SplitPanel.setStretch(f,0);W.SplitPanel.setStretch(p,1);W.SplitPanel.setStretch(m.stackedPanel,0);W.BoxPanel.setStretch(_.sideBar,0);W.BoxPanel.setStretch(g,1);W.BoxPanel.setStretch(m.sideBar,0);W.SplitPanel.setStretch(u,1);g.addWidget(_.stackedPanel);g.addWidget(p);g.addWidget(m.stackedPanel);u.addWidget(g);u.addWidget(f);l.addWidget(_.sideBar);l.addWidget(u);l.addWidget(m.sideBar);y.direction="top-to-bottom";y.spacing=0;u.setRelativeSizes([3,1]);g.setRelativeSizes([1,2.5,1]);W.BoxLayout.setStretch(i,0);W.BoxLayout.setStretch(n.panel,0);W.BoxLayout.setStretch(r.panel,0);W.BoxLayout.setStretch(l,1);W.BoxLayout.setStretch(o,0);y.addWidget(i);y.addWidget(r.panel);y.addWidget(l);y.addWidget(o);this._headerPanel.hide();this._bottomPanel.hide();this._downPanel.hide();this.layout=y;this._tracker.currentChanged.connect(this._onCurrentChanged,this);this._tracker.activeChanged.connect(this._onActiveChanged,this);this._dockPanel.layoutModified.connect(this._onLayoutModified,this);this._vsplitPanel.updated.connect(this._onLayoutModified,this);this._downPanel.currentChanged.connect(this._onLayoutModified,this);this._downPanel.tabBar.tabMoved.connect(this._onTabPanelChanged,this);this._downPanel.stackedPanel.widgetRemoved.connect(this._onTabPanelChanged,this);this._leftHandler.sideBar.currentChanged.connect(this._onLayoutModified,this);this._rightHandler.sideBar.currentChanged.connect(this._onLayoutModified,this);this._hsplitPanel.updated.connect(this._onLayoutModified,this);const w=this._titleHandler=new D.TitleHandler(this);this.add(w,"top",{rank:100});if(this._dockPanel.mode==="multiple-document"){this._topHandler.addWidget(this._menuHandler.panel,100);w.hide()}else{y.insertWidget(2,this._menuHandler.panel)}const v=this._skipLinkWidget=new D.SkipLinkWidget(this);this.add(v,"top",{rank:0});this._skipLinkWidget.show();this.currentChanged.connect(((e,t)=>{let i=t.newValue;let n=t.oldValue;if(n){n.title.changed.disconnect(this._updateTitlePanelTitle,this)}if(i){i.title.changed.connect(this._updateTitlePanelTitle,this);this._updateTitlePanelTitle()}if(i&&i instanceof a.DocumentWidget){i.context.pathChanged.connect(this._updateCurrentPath,this)}this._updateCurrentPath()}))}get activeChanged(){return this._activeChanged}get activeWidget(){return this._tracker.activeWidget}get currentChanged(){return this._currentChanged}get modeChanged(){return this._modeChanged}get currentPathChanged(){return this._currentPathChanged}get currentWidget(){return this._tracker.currentWidget}get layoutModified(){return this._layoutModified}get leftCollapsed(){return!this._leftHandler.sideBar.currentTitle}get rightCollapsed(){return!this._rightHandler.sideBar.currentTitle}get presentationMode(){return this.hasClass("jp-mod-presentationMode")}set presentationMode(e){this.toggleClass("jp-mod-presentationMode",e)}get mode(){return this._dockPanel.mode}set mode(e){const t=this._dockPanel;if(e===t.mode){return}const i=this.currentWidget;if(e==="single-document"){this._cachedLayout=t.saveLayout();t.mode=e;if(this.currentWidget){t.activateWidget(this.currentWidget)}this.layout.insertWidget(2,this._menuHandler.panel);this._titleHandler.show();this._updateTitlePanelTitle()}else{const n=(0,T.toArray)(t.widgets());t.mode=e;if(this._cachedLayout){D.normalizeAreaConfig(t,this._cachedLayout.main);t.restoreLayout(this._cachedLayout);this._cachedLayout=null}n.forEach((e=>{if(!e.parent){this._addToMainArea(e,Object.assign(Object.assign({},this._mainOptionsCache.get(e)),{activate:false}))}}));this._mainOptionsCache.clear();if(i){t.activateWidget(i)}this.add(this._menuHandler.panel,"top",{rank:100});this._titleHandler.hide()}this.node.dataset.shellMode=e;this._downPanel.fit();this._modeChanged.emit(e)}get restored(){return this._restored.promise}activateById(e){if(this._leftHandler.has(e)){this._leftHandler.activate(e);return}if(this._rightHandler.has(e)){this._rightHandler.activate(e);return}const t=this._downPanel.tabBar.titles.findIndex((t=>t.owner.id===e));if(t>=0){this._downPanel.currentIndex=t;return}const i=this._dockPanel;const n=(0,T.find)(i.widgets(),(t=>t.id===e));if(n){i.activateWidget(n)}}activateNextTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t<e.titles.length-1){e.currentIndex+=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===e.titles.length-1){const e=this._adjacentBar("next");if(e){e.currentIndex=0;if(e.currentTitle){e.currentTitle.owner.activate()}}}}activatePreviousTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t>0){e.currentIndex-=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===0){const e=this._adjacentBar("previous");if(e){const t=e.titles.length;e.currentIndex=t-1;if(e.currentTitle){e.currentTitle.owner.activate()}}}}activateNextTabBar(){const e=this._adjacentBar("next");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}activatePreviousTabBar(){const e=this._adjacentBar("previous");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}add(e,t="main",i){switch(t||"main"){case"bottom":return this._addToBottomArea(e,i);case"down":return this._addToDownArea(e,i);case"header":return this._addToHeaderArea(e,i);case"left":return this._addToLeftArea(e,i);case"main":return this._addToMainArea(e,i);case"menu":return this._addToMenuArea(e,i);case"right":return this._addToRightArea(e,i);case"top":return this._addToTopArea(e,i);default:throw new Error(`Invalid area: ${t}`)}}collapseLeft(){this._leftHandler.collapse();this._onLayoutModified()}collapseRight(){this._rightHandler.collapse();this._onLayoutModified()}dispose(){if(this.isDisposed){return}this._layoutDebouncer.dispose();super.dispose()}expandLeft(){this._leftHandler.expand();this._onLayoutModified()}expandRight(){this._rightHandler.expand();this._onLayoutModified()}closeAll(){(0,T.toArray)(this._dockPanel.widgets()).forEach((e=>e.close()));this._downPanel.stackedPanel.widgets.forEach((e=>e.close()))}isEmpty(e){switch(e){case"bottom":return this._bottomPanel.widgets.length===0;case"down":return this._downPanel.stackedPanel.widgets.length===0;case"header":return this._headerPanel.widgets.length===0;case"left":return this._leftHandler.stackedPanel.widgets.length===0;case"main":return this._dockPanel.isEmpty;case"menu":return this._menuHandler.panel.widgets.length===0;case"right":return this._rightHandler.stackedPanel.widgets.length===0;case"top":return this._topHandler.panel.widgets.length===0;default:return true}}restoreLayout(e,t){var i,n;const{mainArea:s,downArea:r,leftArea:a,rightArea:o,relativeSizes:d}=t;if(s){const{currentWidget:t,dock:i}=s;if(i){this._dockPanel.restoreLayout(i)}if(e){this.mode=e}if(t){this.activateById(t.id)}}else{if(e){this.mode=e}}if(r){const{currentWidget:e,widgets:t,size:s}=r;const a=(i=t===null||t===void 0?void 0:t.map((e=>e.id)))!==null&&i!==void 0?i:[];this._downPanel.tabBar.titles.filter((e=>!a.includes(e.owner.id))).map((e=>e.owner.close()));const o=this._downPanel.tabBar.titles.map((e=>e.owner.id));t===null||t===void 0?void 0:t.filter((e=>!o.includes(e.id))).map((e=>this._downPanel.addWidget(e)));while(!T.ArrayExt.shallowEqual(a,this._downPanel.tabBar.titles.map((e=>e.owner.id)))){this._downPanel.tabBar.titles.forEach(((e,t)=>{const i=a.findIndex((t=>e.owner.id==t));if(i>=0&&i!=t){this._downPanel.tabBar.insertTab(i,e)}}))}if(e){const t=this._downPanel.stackedPanel.widgets.findIndex((t=>t.id===e.id));if(t){this._downPanel.currentIndex=t;(n=this._downPanel.currentWidget)===null||n===void 0?void 0:n.activate()}}if(s&&s>0){this._vsplitPanel.setRelativeSizes([1-s,s])}else{this._downPanel.stackedPanel.widgets.forEach((e=>e.close()));this._downPanel.hide()}}if(a){this._leftHandler.rehydrate(a)}else{if(e==="single-document"){this.collapseLeft()}}if(o){this._rightHandler.rehydrate(o)}else{if(e==="single-document"){this.collapseRight()}}if(d){this._hsplitPanel.setRelativeSizes(d)}if(!this._isRestored){B.MessageLoop.flush();this._restored.resolve(t)}}saveLayout(){const e={mainArea:{currentWidget:this._tracker.currentWidget,dock:this.mode==="single-document"?this._cachedLayout||this._dockPanel.saveLayout():this._dockPanel.saveLayout()},downArea:{currentWidget:this._downPanel.currentWidget,widgets:(0,T.toArray)(this._downPanel.stackedPanel.widgets),size:this._vsplitPanel.relativeSizes()[1]},leftArea:this._leftHandler.dehydrate(),rightArea:this._rightHandler.dehydrate(),relativeSizes:this._hsplitPanel.relativeSizes()};return e}widgets(e){switch(e!==null&&e!==void 0?e:"main"){case"main":return this._dockPanel.widgets();case"left":return(0,T.iter)(this._leftHandler.sideBar.titles.map((e=>e.owner)));case"right":return(0,T.iter)(this._rightHandler.sideBar.titles.map((e=>e.owner)));case"header":return this._headerPanel.children();case"top":return this._topHandler.panel.children();case"menu":return this._menuHandler.panel.children();case"bottom":return this._bottomPanel.children();default:throw new Error(`Invalid area: ${e}`)}}onAfterAttach(e){this.node.dataset.shellMode=this.mode}_updateTitlePanelTitle(){let e=this.currentWidget;const t=this._titleHandler.inputElement;t.value=e?e.title.label:"";t.title=e?e.title.caption:""}_updateCurrentPath(){let e=this.currentWidget;let t="";if(e&&e instanceof a.DocumentWidget){t=e.context.path}this._currentPathChanged.emit({newValue:t,oldValue:this._currentPath});this._currentPath=t}_addToLeftArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};this._sideOptionsCache.set(e,t);const i="rank"in t?t.rank:j;this._leftHandler.addWidget(e,i);this._onLayoutModified()}_addToMainArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const i=this._dockPanel;const n=t.mode||"tab-after";let s=this.currentWidget;if(t.ref){s=(0,T.find)(i.widgets(),(e=>e.id===t.ref))||null}const{title:r}=e;r.dataset=Object.assign(Object.assign({},r.dataset),{id:e.id});if(r.icon instanceof d.LabIcon){r.icon=r.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof r.icon==="string"||!r.icon){r.iconClass=(0,d.classes)(r.iconClass,"jp-Icon")}i.addWidget(e,{mode:n,ref:s});if(i.mode==="single-document"){this._mainOptionsCache.set(e,t)}if(t.activate!==false){i.activateWidget(e)}}_addToRightArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};const i="rank"in t?t.rank:j;this._sideOptionsCache.set(e,t);this._rightHandler.addWidget(e,i);this._onLayoutModified()}_addToTopArea(e,t){var i;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const n=(i=t.rank)!==null&&i!==void 0?i:j;this._topHandler.addWidget(e,n);this._onLayoutModified();if(this._topHandler.panel.isHidden){this._topHandler.panel.show()}}_addToMenuArea(e,t){var i;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const n=(i=t.rank)!==null&&i!==void 0?i:j;this._menuHandler.addWidget(e,n);this._onLayoutModified();if(this._menuHandler.panel.isHidden){this._menuHandler.panel.show()}}_addToHeaderArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._headerPanel.addWidget(e);this._onLayoutModified();if(this._headerPanel.isHidden){this._headerPanel.show()}}_addToBottomArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._bottomPanel.addWidget(e);this._onLayoutModified();if(this._bottomPanel.isHidden){this._bottomPanel.show()}}_addToDownArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const{title:i}=e;i.dataset=Object.assign(Object.assign({},i.dataset),{id:e.id});if(i.icon instanceof d.LabIcon){i.icon=i.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof i.icon==="string"||!i.icon){i.iconClass=(0,d.classes)(i.iconClass,"jp-Icon")}this._downPanel.addWidget(e);this._onLayoutModified();if(this._downPanel.isHidden){this._downPanel.show()}}_adjacentBar(e){const t=this._currentTabBar();if(!t){return null}const i=(0,T.toArray)(this._dockPanel.tabBars());const n=i.length;const s=i.indexOf(t);if(e==="previous"){return s>0?i[s-1]:s===0?i[n-1]:null}return s<n-1?i[s+1]:s===n-1?i[0]:null}_currentTabBar(){const e=this._tracker.currentWidget;if(!e){return null}const t=e.title;const i=this._dockPanel.tabBars();return(0,T.find)(i,(e=>e.titles.indexOf(t)>-1))||null}_onActiveChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${H}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(H,"")}this._activeChanged.emit(t)}_onCurrentChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${L}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(L,"")}this._currentChanged.emit(t);this._onLayoutModified()}_onTabPanelChanged(){if(this._downPanel.stackedPanel.widgets.length===0){this._downPanel.hide()}this._onLayoutModified()}_onLayoutModified(){void this._layoutDebouncer.invoke()}}var D;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t;function i(e,t){if(!t){return}if(t.type==="tab-area"){t.widgets=t.widgets.filter((t=>!t.isDisposed&&t.parent===e));return}t.children.forEach((t=>{i(e,t)}))}e.normalizeAreaConfig=i;class n{constructor(){this._panelChildHook=(e,t)=>{switch(t.type){case"child-added":{const e=t.child;if(this._items.find((t=>t.widget===e))){break}const i=this._items[this._items.length-1].rank;this._items.push({widget:e,rank:i})}break;case"child-removed":{const e=t.child;T.ArrayExt.removeFirstWhere(this._items,(t=>t.widget===e))}break;default:break}return true};this._items=new Array;this._panel=new W.Panel;B.MessageLoop.installMessageHook(this._panel,this._panelChildHook)}get panel(){return this._panel}addWidget(t,i){t.parent=null;const n={widget:t,rank:i};const s=T.ArrayExt.upperBound(this._items,n,e.itemCmp);T.ArrayExt.insert(this._items,s,n);this._panel.insertWidget(s,t)}}e.PanelHandler=n;class s{constructor(){this._items=new Array;this._sideBar=new W.TabBar({insertBehavior:"none",removeBehavior:"none",allowDeselect:true,orientation:"vertical"});this._stackedPanel=new W.StackedPanel;this._sideBar.hide();this._stackedPanel.hide();this._lastCurrent=null;this._sideBar.currentChanged.connect(this._onCurrentChanged,this);this._sideBar.tabActivateRequested.connect(this._onTabActivateRequested,this);this._stackedPanel.widgetRemoved.connect(this._onWidgetRemoved,this)}get sideBar(){return this._sideBar}get stackedPanel(){return this._stackedPanel}expand(){const e=this._lastCurrent||this._items.length>0&&this._items[0].widget;if(e){this.activate(e.id)}}activate(e){const t=this._findWidgetByID(e);if(t){this._sideBar.currentTitle=t.title;t.activate()}}has(e){return this._findWidgetByID(e)!==null}collapse(){this._sideBar.currentTitle=null}addWidget(e,t){e.parent=null;e.hide();const i={widget:e,rank:t};const n=this._findInsertIndex(i);T.ArrayExt.insert(this._items,n,i);this._stackedPanel.insertWidget(n,e);const s=this._sideBar.insertTab(n,e.title);s.dataset={id:e.id};if(s.icon instanceof d.LabIcon){s.icon=s.icon.bindprops({stylesheet:"sideBar"})}else if(typeof s.icon==="string"||!s.icon){s.iconClass=(0,d.classes)(s.iconClass,"jp-Icon","jp-Icon-20")}this._refreshVisibility()}dehydrate(){const e=this._sideBar.currentTitle===null;const t=(0,T.toArray)(this._stackedPanel.widgets);const i=t[this._sideBar.currentIndex];return{collapsed:e,currentWidget:i,widgets:t}}rehydrate(e){if(e.currentWidget){this.activate(e.currentWidget.id)}if(e.collapsed){this.collapse()}}_findInsertIndex(t){return T.ArrayExt.upperBound(this._items,t,e.itemCmp)}_findWidgetIndex(e){return T.ArrayExt.findFirstIndex(this._items,(t=>t.widget===e))}_findWidgetByTitle(e){const t=(0,T.find)(this._items,(t=>t.widget.title===e));return t?t.widget:null}_findWidgetByID(e){const t=(0,T.find)(this._items,(t=>t.widget.id===e));return t?t.widget:null}_refreshVisibility(){this._sideBar.setHidden(this._sideBar.titles.length===0);this._stackedPanel.setHidden(this._sideBar.currentTitle===null)}_onCurrentChanged(e,t){const i=t.previousTitle?this._findWidgetByTitle(t.previousTitle):null;const n=t.currentTitle?this._findWidgetByTitle(t.currentTitle):null;if(i){i.hide()}if(n){n.show()}this._lastCurrent=n||i;this._refreshVisibility()}_onTabActivateRequested(e,t){t.title.owner.activate()}_onWidgetRemoved(e,t){if(t===this._lastCurrent){this._lastCurrent=null}T.ArrayExt.removeAt(this._items,this._findWidgetIndex(t));this._sideBar.removeTab(t.title);this._refreshVisibility()}}e.SideBarHandler=s;class r extends W.Widget{constructor(e){super();this.addClass("jp-skiplink");this.id="jp-skiplink";this._shell=e;this._createSkipLink("Skip to left side bar")}handleEvent(e){switch(e.type){case"click":this._focusLeftSideBar();break}}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("click",this)}onBeforeDetach(e){this.node.removeEventListener("click",this);super.onBeforeDetach(e)}_focusLeftSideBar(){this._shell.expandLeft()}_createSkipLink(e){const t=document.createElement("a");t.href="#";t.tabIndex=1;t.text=e;t.className="skip-link";this.node.appendChild(t)}}e.SkipLinkWidget=r;class a extends W.Widget{constructor(e){super();this._selected=false;const t=document.createElement("input");t.type="text";this.node.appendChild(t);this._shell=e;this.id="jp-title-panel-title"}onAfterAttach(e){super.onAfterAttach(e);this.inputElement.addEventListener("keyup",this);this.inputElement.addEventListener("click",this);this.inputElement.addEventListener("blur",this)}onBeforeDetach(e){super.onBeforeDetach(e);this.inputElement.removeEventListener("keyup",this);this.inputElement.removeEventListener("click",this);this.inputElement.removeEventListener("blur",this)}handleEvent(e){switch(e.type){case"keyup":void this._evtKeyUp(e);break;case"click":this._evtClick(e);break;case"blur":this._selected=false;break}}async _evtKeyUp(e){if(e.key=="Enter"){const e=this._shell.currentWidget;if(e==null){return}const t=e.title.label;const i=this.inputElement;const n=i.value;i.blur();if(n!==t){e.title.label=n}else{i.value=t}}}_evtClick(e){if(e.button!==0||this._selected){return}const t=this.inputElement;e.preventDefault();e.stopPropagation();this._selected=true;const i=t.value.indexOf(".");if(i===-1){t.select()}else{t.setSelectionRange(0,i)}}get inputElement(){return this.node.children[0]}}e.TitleHandler=a;class o extends W.SplitPanel{constructor(e={}){super(e);this.updated=new h.Signal(this)}onUpdateRequest(e){super.onUpdateRequest(e);this.updated.emit()}}e.RestorableSplitPanel=o})(D||(D={}));var R=i(76487);const z=new c.Token("@jupyterlab/application:ILabStatus");class F{constructor(e){this._busyCount=0;this._dirtyCount=0;this._busySignal=new h.Signal(e);this._dirtySignal=new h.Signal(e)}get busySignal(){return this._busySignal}get dirtySignal(){return this._dirtySignal}get isBusy(){return this._busyCount>0}get isDirty(){return this._dirtyCount>0}setDirty(){const e=this.isDirty;this._dirtyCount++;if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}return new R.DisposableDelegate((()=>{const e=this.isDirty;this._dirtyCount=Math.max(0,this._dirtyCount-1);if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}}))}setBusy(){const e=this.isBusy;this._busyCount++;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}return new R.DisposableDelegate((()=>{const e=this.isBusy;this._busyCount--;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}}))}}class N extends u{constructor(e={shell:new O}){super(Object.assign(Object.assign({},e),{shell:e.shell||new O}));this.name=f.PageConfig.getOption("appName")||"JupyterLab";this.namespace=f.PageConfig.getOption("appNamespace")||this.name;this.registerPluginErrors=[];this.status=new F(this);this.version=f.PageConfig.getOption("appVersion")||"unknown";this.restored=this.shell.restored.then((()=>undefined)).catch((()=>undefined));const t=Object.keys(N.defaultInfo).reduce(((t,i)=>{if(i in e){t[i]=JSON.parse(JSON.stringify(e[i]))}return t}),{});this._info=Object.assign(Object.assign({},N.defaultInfo),t);const i=N.defaultPaths.urls;const n=N.defaultPaths.directories;const s=e.paths&&e.paths.urls||{};const r=e.paths&&e.paths.directories||{};this._paths={urls:Object.keys(i).reduce(((e,t)=>{if(t in s){const i=s[t];e[t]=i}else{e[t]=i[t]}return e}),{}),directories:Object.keys(N.defaultPaths.directories).reduce(((e,t)=>{if(t in r){const i=r[t];e[t]=i}else{e[t]=n[t]}return e}),{})};if(this._info.devMode){this.shell.addClass("jp-mod-devMode")}this.docRegistry.addModelFactory(new a.Base64ModelFactory);if(e.mimeExtensions){for(const t of k(e.mimeExtensions)){this.registerPlugin(t)}}}get info(){return this._info}get paths(){return this._paths}registerPluginModule(e){let t=e.default;if(!e.hasOwnProperty("__esModule")){t=e}if(!Array.isArray(t)){t=[t]}t.forEach((t=>{try{console.log("register module: "+e+", plugin: "+t);this.registerPlugin(t)}catch(i){this.registerPluginErrors.push(i)}}))}registerPluginModules(e){e.forEach((e=>{this.registerPluginModule(e)}))}}(function(e){e.IInfo=new c.Token("@jupyterlab/application:IInfo");e.defaultInfo={devMode:f.PageConfig.getOption("devMode").toLowerCase()==="true",deferred:{patterns:[],matches:[]},disabled:{patterns:[],matches:[]},mimeExtensions:[],filesCached:f.PageConfig.getOption("cacheFiles").toLowerCase()==="true"};e.defaultPaths={urls:{base:f.PageConfig.getOption("baseUrl"),notFound:f.PageConfig.getOption("notFoundUrl"),app:f.PageConfig.getOption("appUrl"),doc:f.PageConfig.getOption("docUrl"),static:f.PageConfig.getOption("staticUrl"),settings:f.PageConfig.getOption("settingsUrl"),themes:f.PageConfig.getOption("themesUrl"),translations:f.PageConfig.getOption("translationsApiUrl"),hubHost:f.PageConfig.getOption("hubHost")||undefined,hubPrefix:f.PageConfig.getOption("hubPrefix")||undefined,hubUser:f.PageConfig.getOption("hubUser")||undefined,hubServerName:f.PageConfig.getOption("hubServerName")||undefined},directories:{appSettings:f.PageConfig.getOption("appSettingsDir"),schemas:f.PageConfig.getOption("schemasDir"),static:f.PageConfig.getOption("staticDir"),templates:f.PageConfig.getOption("templatesDir"),themes:f.PageConfig.getOption("themesDir"),userSettings:f.PageConfig.getOption("userSettingsDir"),serverRoot:f.PageConfig.getOption("serverRoot"),workspaces:f.PageConfig.getOption("workspacesDir")}}})(N||(N={}));class ${constructor(e){this.stop=new c.Token("@jupyterlab/application:Router#stop");this._routed=new h.Signal(this);this._rules=new Map;this.base=e.base;this.commands=e.commands}get current(){var e,t;const{base:i}=this;const n=f.URLExt.parse(window.location.href);const{search:s,hash:r}=n;const a=(t=(e=n.pathname)===null||e===void 0?void 0:e.replace(i,"/"))!==null&&t!==void 0?t:"";const o=a+s+r;return{hash:r,path:a,request:o,search:s}}get routed(){return this._routed}navigate(e,t={}){const{base:i}=this;const{history:n}=window;const{hard:s}=t;const r=document.location.href;const a=e&&e.indexOf(i)===0?e:f.URLExt.join(i,e);if(a===r){return s?this.reload():undefined}n.pushState({},"",a);if(s){return this.reload()}if(!t.skipRouting){requestAnimationFrame((()=>{void this.route()}))}}register(e){var t;const{command:i,pattern:n}=e;const s=(t=e.rank)!==null&&t!==void 0?t:100;const r=this._rules;r.set(n,{command:i,rank:s});return new R.DisposableDelegate((()=>{r.delete(n)}))}reload(){window.location.reload()}route(){const{commands:e,current:t,stop:i}=this;const{request:n}=t;const s=this._routed;const r=this._rules;const a=[];r.forEach(((e,t)=>{if(n===null||n===void 0?void 0:n.match(t)){a.push(e)}}));const o=a.sort(((e,t)=>t.rank-e.rank));const d=new c.PromiseDelegate;const l=async()=>{if(!o.length){s.emit(t);d.resolve(undefined);return}const{command:r}=o.pop();try{const n=this.current.request;const s=await e.execute(r,t);if(s===i){o.length=0;console.debug(`Routing ${n} was short-circuited by ${r}`)}}catch(a){console.warn(`Routing ${n} to ${r} failed`,a)}void l()};void l();return d.promise}}const q=new c.Token("@jupyterlab/apputils:IConnectionLost");const U=new c.Token("@jupyterlab/application:IRouter");const V=new c.Token("@jupyterlab/application:ITreePathUpdater")}}]);