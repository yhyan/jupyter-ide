(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[7933],{87933:(e,t,o)=>{"use strict";o.r(t);o.d(t,{CodeMirrorEditor:()=>de,CodeMirrorEditorFactory:()=>he,CodeMirrorMimeTypeService:()=>ue,EditorSyntaxStatus:()=>_e,ICodeMirror:()=>ve,Mode:()=>X,editorServices:()=>Ce});var i=o(1612);var n=o(26825);var s=o(77616);var r=o(62867);var a=o(9727);var l=o(76487);var d=o(87598);var c=o(75138);var h=o(26260);var u=o.n(h);var m=o(82017);var f=o(91123);var g=o(61682);var p=o(32407);var y=o(3519);var _=o(79501);var v=o(56755);var C=o(991);var b=o(57342);var M=o(49469);var S=o(60509);var O=o(81094);var w=o(79480);var x=o(70722);var k=o(45751);var E=o(19757);var T=o(19238);var P=o(43602);var I=o(25022);var j=o(37103);var B=o(83280);var D=o(94521);var L=o(95293);var F=o(83875);var W=o(90560);var H=o(80011);var R=o(98627);var A=o(49055);var $=o(27968);var N=o(38519);var z=o(48033);var V=o(2312);var G=o(32848);var q=o(25397);var K=o(14149);var U=o(56141);u().defineMode("ipython",((e,t)=>{const o={};for(const i in t){if(t.hasOwnProperty(i)){o[i]=t[i]}}o.name="python";o.singleOperators=new RegExp("^[\\+\\-\\*/%&|@\\^~<>!\\?]");o.identifiers=new RegExp("^[_A-Za-z¡-￿][_A-Za-z0-9¡-￿]*");return u().getMode(e,o)}),"python");u().defineMIME("text/x-ipython","ipython");u().modeInfo.push({ext:[],mime:"text/x-ipython",mode:"ipython",name:"ipython"});var J=o(15718);var Z=o(48239);var Q=o(38234);u().defineMode("ipythongfm",((e,t)=>{const o=u().getMode(e,{name:"gfm",tokenTypeOverrides:{list3:"string-2"}});const i=u().getMode(e,{name:"stex",inMathMode:true});return u().multiplexingMode(o,{open:"<code>",close:"</code>",mode:o,parseDelimiters:true},{open:"<pre>",close:"</pre>",mode:o,parseDelimiters:true},{open:"```",close:"```",mode:o,parseDelimiters:true},{open:"`",close:"`",mode:o,parseDelimiters:true},{open:"$$",close:"$$",mode:i,delimStyle:"delimit"},{open:/\$(?=.*\$)/,close:"$",mode:i,delimStyle:"delimit"},{open:"\\(",close:"\\)",mode:i,delimStyle:"delimit"},{open:"\\[",close:"\\]",mode:i,delimStyle:"delimit"})}),"gfm");u().defineMIME("text/x-ipythongfm","ipythongfm");u().modeInfo.push({ext:[],mime:"text/x-ipythongfm",mode:"ipythongfm",name:"ipythongfm"});var X;(function(e){const t=[{loader:async e=>u().modes.hasOwnProperty(e.mode),rank:0},{loader:function(e){return new Promise(((t,i)=>{Promise.all([o.e(330),o.e(2106)]).then((function(){var i=[o(52106)(`./${e.mode}/${e.mode}.js`)];(function(){t(true)}).apply(null,i)})).catch(o.oe)}))},rank:99}];function i(){return u().modeInfo}e.getModeInfo=i;function n(e,t,o){u().runMode(e,t,o)}e.run=n;async function a(e){const o=d(e);for(const i of t){if(await i.loader(o)){return o}}return null}e.ensure=a;function l(e,o){const i={loader:e,rank:o};const n=r.ArrayExt.upperBound(t,i,Y.itemCmp);r.ArrayExt.insert(t,n,i)}e.addSpecLoader=l;function d(e){var t;const o=typeof e==="string"?e:e.mode||e.name;const i=typeof e!=="string"?e.mime:o;const n=typeof e!=="string"?(t=e.ext)!==null&&t!==void 0?t:[]:[];return u().findModeByName(o||"")||u().findModeByMIME(i||"")||f(n)||u().findModeByMIME(s.IEditorMimeTypeService.defaultMimeType)||u().findModeByMIME("text/plain")}e.findBest=d;function c(e){return u().findModeByMIME(e)}e.findByMIME=c;function h(e){return u().findModeByName(e)}e.findByName=h;function m(e){const t=F.PathExt.basename(e);return u().findModeByFileName(t)}e.findByFileName=m;function f(e){if(typeof e==="string"){return u().findModeByExtension(e)}for(let t=0;t<e.length;t++){const o=u().findModeByExtension(e[t]);if(o){return o}}return null}e.findByExtension=f})(X||(X={}));var Y;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t})(Y||(Y={}));var ee=undefined&&undefined.__rest||function(e,t){var o={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0)o[i]=e[i];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++){if(t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n]))o[i[n]]=e[i[n]]}return o};const te="jp-CodeMirrorEditor";const oe="jp-mod-readOnly";const ie="jp-CollaboratorCursor";const ne="jp-CollaboratorCursor-hover";const se=38;const re=40;const ae=1e3;const le=true;class de{constructor(e){var t;this.edgeRequested=new c.Signal(this);this.selectionMarkers={};this._keydownHandlers=new Array;this._changeGuard=false;this._uuid="";this._needsRefresh=false;this._isDisposed=false;this._lastChange=null;const o=this.host=e.host;this.translator=e.translator||i.nullTranslator;this._trans=this.translator.load("jupyterlab");o.classList.add(te);o.classList.add("jp-Editor");o.addEventListener("focus",this,true);o.addEventListener("blur",this,true);o.addEventListener("scroll",this,true);this._uuid=e.uuid||a.UUID.uuid4();const n=e.selectionStyle||{};this._selectionStyle=Object.assign(Object.assign({},s.CodeEditor.defaultSelectionStyle),n);const l=this._model=e.model;const h=e.config||{};const m=this._config=Object.assign(Object.assign({},de.defaultConfig),h);const f=this._editor=ce.createEditor(o,m);this._initializeEditorBinding();this.model.sharedModelSwitched.connect(this._initializeEditorBinding,this);const g=f.getDoc();if(!le){g.setValue(l.value.text)}this._onMimeTypeChanged();this._onCursorActivity();this._poll=new d.Poll({factory:async()=>{this._checkSync()},frequency:{interval:3e3,backoff:false},standby:()=>this._lastChange?"when-hidden":true});if(!le){l.value.changed.connect(this._onValueChanged,this)}l.mimeTypeChanged.connect(this._onMimeTypeChanged,this);l.selections.changed.connect(this._onSelectionsChanged,this);u().on(f,"keydown",((e,t)=>{const o=r.ArrayExt.findFirstIndex(this._keydownHandlers,(e=>{if(e(this,t)===true){t.preventDefault();return true}return false}));if(o===-1){this.onKeydown(t)}}));if(le){(t=this._yeditorBinding)===null||t===void 0?void 0:t.on("cursorActivity",(()=>this._onCursorActivity()))}else{u().on(f,"cursorActivity",(()=>this._onCursorActivity()));u().on(f.getDoc(),"beforeChange",((e,t)=>{this._beforeDocChanged(e,t)}))}u().on(f.getDoc(),"change",((e,t)=>{if(t.origin==="setValue"&&this.hasFocus()){this.refresh()}this._lastChange=t}));f.on("paste",((e,t)=>{var o;const i=(o=this._config["handlePaste"])!==null&&o!==void 0?o:true;if(!i){t.codemirrorIgnore=true}}));f.getWrapperElement().addEventListener("paste",(()=>{if(this.hasFocus()){this.refresh()}}))}_initializeEditorBinding(){var e;if(!le){return}(e=this._yeditorBinding)===null||e===void 0?void 0:e.destroy();const t=this.model.sharedModel;const o=t.undoManager?{yUndoManager:t.undoManager}:{};const i=t.awareness;this._yeditorBinding=new L.z$(t.ysource,this.editor,i,o)}get uuid(){return this._uuid}set uuid(e){this._uuid=e}get selectionStyle(){return this._selectionStyle}set selectionStyle(e){this._selectionStyle=e}get editor(){return this._editor}get doc(){return this._editor.getDoc()}get lineCount(){return this.doc.lineCount()}get model(){return this._model}get lineHeight(){return this._editor.defaultTextHeight()}get charWidth(){return this._editor.defaultCharWidth()}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.host.removeEventListener("focus",this,true);this.host.removeEventListener("blur",this,true);this.host.removeEventListener("scroll",this,true);if(this._yeditorBinding){this._yeditorBinding.destroy()}this._keydownHandlers.length=0;this._poll.dispose();c.Signal.clearData(this)}getOption(e){return this._config[e]}setOption(e,t){if(this._config[e]!==t){this._config[e]=t;ce.setOption(this.editor,e,t,this._config)}}setOptions(e){const t=this._editor;t.startOperation();for(let o in e){t.operation((()=>{this.setOption(o,e[o])}))}t.endOperation()}getLine(e){return this.doc.getLine(e)}getOffsetAt(e){return this.doc.indexFromPos({ch:e.column,line:e.line})}getPositionAt(e){const{ch:t,line:o}=this.doc.posFromIndex(e);return{line:o,column:t}}undo(){this.model.sharedModel.undo()}redo(){this.model.sharedModel.redo()}clearHistory(){var e,t;(t=(e=this._yeditorBinding)===null||e===void 0?void 0:e.yUndoManager)===null||t===void 0?void 0:t.clear()}focus(){this._editor.focus()}hasFocus(){return this._editor.getWrapperElement().contains(document.activeElement)}blur(){this._editor.getInputField().blur()}refresh(){this._editor.refresh();this._needsRefresh=false}resizeToFit(){if(this.hasFocus()){this.refresh()}else{this._needsRefresh=true}this._clearHover()}addOverlay(e,t){this._editor.addOverlay(e,t)}removeOverlay(e){this._editor.removeOverlay(e)}getSearchCursor(e,t,o){return this._editor.getDoc().getSearchCursor(e,t,o)}getCursor(e){return this._editor.getDoc().getCursor(e)}get state(){return this._editor.state}operation(e){return this._editor.operation(e)}firstLine(){return this._editor.getDoc().firstLine()}lastLine(){return this._editor.getDoc().lastLine()}scrollIntoView(e,t){this._editor.scrollIntoView(e,t)}scrollIntoViewCentered(e){var t,o;const i=this._editor.charCoords(e,"local").top;const n=this._editor.getWrapperElement().offsetHeight;(o=(t=this.host).scrollIntoView)===null||o===void 0?void 0:o.call(t,{behavior:"auto",block:"center",inline:"center"});this._editor.scrollTo(null,i-n/2)}cursorCoords(e,t){return this._editor.cursorCoords(e,t)}getRange(e,t,o){return this._editor.getDoc().getRange(e,t,o)}addKeydownHandler(e){this._keydownHandlers.push(e);return new l.DisposableDelegate((()=>{r.ArrayExt.removeAllWhere(this._keydownHandlers,(t=>t===e))}))}setSize(e){if(e){this._editor.setSize(e.width,e.height)}else{this._editor.setSize(null,null)}this._needsRefresh=false}revealPosition(e){const t=this._toCodeMirrorPosition(e);this._editor.scrollIntoView(t)}revealSelection(e){const t={from:this._toCodeMirrorPosition(e.start),to:this._toCodeMirrorPosition(e.end)};this._editor.scrollIntoView(t)}getCoordinateForPosition(e){const t=this._toCodeMirrorPosition(e);const o=this.editor.charCoords(t,"page");return o}getPositionForCoordinate(e){return this._toPosition(this.editor.coordsChar(e))||null}getCursorPosition(){const e=this.doc.getCursor();return this._toPosition(e)}setCursorPosition(e,t){const o=this._toCodeMirrorPosition(e);this.doc.setCursor(o,undefined,t);if(!this.editor.hasFocus()){this.model.selections.set(this.uuid,this.getSelections())}}getSelection(){return this.getSelections()[0]}setSelection(e){this.setSelections([e])}getSelections(){const e=this.doc.listSelections();if(e.length>0){return e.map((e=>this._toSelection(e)))}const t=this.doc.getCursor();const o=this._toSelection({anchor:t,head:t});return[o]}setSelections(e){const t=this._toCodeMirrorSelections(e);this.doc.setSelections(t,0)}replaceSelection(e){this.doc.replaceSelection(e)}getTokens(){let e=[];for(let t=0;t<this.lineCount;++t){const o=this.editor.getLineTokens(t).map((e=>({offset:this.getOffsetAt({column:e.start,line:t}),value:e.string,type:e.type||""})));e=e.concat(o)}return e}getTokenForPosition(e){var t;const o=this._toCodeMirrorPosition(e);const i=this.editor.getTokenAt(o);return{offset:this.getOffsetAt({column:i.start,line:o.line}),value:i.string,type:(t=i.type)!==null&&t!==void 0?t:undefined}}newIndentedLine(){this.execCommand("newlineAndIndent")}execCommand(e){this._editor.execCommand(e)}onKeydown(e){const t=this.getCursorPosition();const{line:o,column:i}=t;if(o===0&&i===0&&e.keyCode===se){if(!e.shiftKey){this.edgeRequested.emit("top")}return false}if(o===0&&e.keyCode===se){if(!e.shiftKey){this.edgeRequested.emit("topLine")}return false}const n=this.lineCount-1;const s=this.getLine(n).length;if(o===n&&i===s&&e.keyCode===re){if(!e.shiftKey){this.edgeRequested.emit("bottom")}return false}return false}_toCodeMirrorSelections(e){if(e.length>0){return e.map((e=>this._toCodeMirrorSelection(e)))}const t={line:0,ch:0};return[{anchor:t,head:t}]}_onMimeTypeChanged(){const e=this._model.mimeType;const t=this._editor;const o=t.getOption("extraKeys")||{};const i=e!=="text/plain"&&e!=="text/x-ipythongfm";if(i){o["Backspace"]="delSpaceToPrevTabStop"}else{delete o["Backspace"]}this.setOption("extraKeys",o);void X.ensure(e).then((e=>{var t;this.setOption("mode",(t=e===null||e===void 0?void 0:e.mime)!==null&&t!==void 0?t:"null")}))}_onSelectionsChanged(e,t){const o=t.key;if(o!==this.uuid){this._cleanSelections(o);if(t.type!=="remove"&&t.newValue){this._markSelections(o,t.newValue)}}}_cleanSelections(e){const t=this.selectionMarkers[e];if(t){t.forEach((e=>{e.clear()}))}delete this.selectionMarkers[e]}_markSelections(e,t){const o=[];if(e===this._hoverId){this._clearHover()}let i;if(this._model.modelDB.collaborators){i=this._model.modelDB.collaborators.get(e)}t.forEach((e=>{if(!a.JSONExt.deepEqual(e.start,e.end)){const t=e.start.line<e.end.line||e.start.line===e.end.line&&e.start.column<=e.end.column;const n=this._toCodeMirrorPosition(t?e.start:e.end);const s=this._toCodeMirrorPosition(t?e.end:e.start);let r;if(i){r=this._toTextMarkerOptions(Object.assign(Object.assign({},e.style),{color:i.color}))}else{r=this._toTextMarkerOptions(e.style)}o.push(this.doc.markText(n,s,r))}else if(i){const t=this._getCaret(i);o.push(this.doc.setBookmark(this._toCodeMirrorPosition(e.end),{widget:t}))}}));this.selectionMarkers[e]=o}_onCursorActivity(){if(this._editor.hasFocus()){const e=this.getSelections();this.model.selections.set(this.uuid,e)}}_toSelection(e){return{uuid:this.uuid,start:this._toPosition(e.anchor),end:this._toPosition(e.head),style:this.selectionStyle}}_toTextMarkerOptions(e){const t=parseInt(e.color.slice(1,3),16);const o=parseInt(e.color.slice(3,5),16);const i=parseInt(e.color.slice(5,7),16);const n=`background-color: rgba( ${t}, ${o}, ${i}, 0.15)`;return{className:e.className,title:e.displayName,css:n}}_toCodeMirrorSelection(e){return{anchor:this._toCodeMirrorPosition(e.start),head:this._toCodeMirrorPosition(e.end)}}_toPosition(e){return{line:e.line,column:e.ch}}_toCodeMirrorPosition(e){return{line:e.line,ch:e.column}}_onValueChanged(e,t){if(this._changeGuard){return}this._changeGuard=true;const o=this.doc;switch(t.type){case"insert":{const e=o.posFromIndex(t.start);o.replaceRange(t.value,e,e,"+input");break}case"remove":{const e=o.posFromIndex(t.start);const i=o.posFromIndex(t.end);o.replaceRange("",e,i,"+input");break}case"set":o.setValue(t.value);break;default:break}this._changeGuard=false}_beforeDocChanged(e,t){if(this._changeGuard){return}this._changeGuard=true;const o=this._model.value;const i=e.indexFromPos(t.from);const n=e.indexFromPos(t.to);const s=t.text.join("\n");if(n!==i){o.remove(i,n)}if(s){o.insert(i,s)}this._changeGuard=false}handleEvent(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e);break;case"scroll":this._evtScroll();break;default:break}}_evtFocus(e){if(this._needsRefresh){this.refresh()}this.host.classList.add("jp-mod-focused");this._onCursorActivity()}_evtBlur(e){this.host.classList.remove("jp-mod-focused")}_evtScroll(){this._clearHover()}_clearHover(){if(this._caretHover){window.clearTimeout(this._hoverTimeout);document.body.removeChild(this._caretHover);this._caretHover=null}}_getCaret(e){const t=e?e.displayName:"Anonymous";const o=e?e.color:this._selectionStyle.color;const i=document.createElement("span");i.className=ie;i.style.borderBottomColor=o;i.onmouseenter=()=>{this._clearHover();this._hoverId=e.sessionId;const n=i.getBoundingClientRect();const s=document.createElement("div");s.className=ne;s.style.left=String(n.left)+"px";s.style.top=String(n.bottom)+"px";s.textContent=t;s.style.backgroundColor=o;s.onmouseenter=()=>{window.clearTimeout(this._hoverTimeout)};s.onmouseleave=()=>{this._hoverTimeout=window.setTimeout((()=>{this._clearHover()}),ae)};this._caretHover=s;document.body.appendChild(s)};i.onmouseleave=()=>{this._hoverTimeout=window.setTimeout((()=>{this._clearHover()}),ae)};return i}_checkSync(){const e=this._lastChange;if(!e){return}this._lastChange=null;const t=this._editor;const o=t.getDoc();if(o.getValue()===this._model.value.text){return}void(0,n.showDialog)({title:this._trans.__("Code Editor out of Sync"),body:this._trans.__("Please open your browser JavaScript console for bug report instructions")});console.warn('If you are able and willing to publicly share the text or code in your editor, you can help us debug the "Code Editor out of Sync" message by pasting the following to the public issue at https://github.com/jupyterlab/jupyterlab/issues/2951. Please note that the data below includes the text/code in your editor.');console.warn(JSON.stringify({model:this._model.value.text,view:o.getValue(),selections:this.getSelections(),cursor:this.getCursorPosition(),lineSep:t.getOption("lineSeparator"),mode:t.getOption("mode"),change:e}))}}(function(e){e.defaultConfig=Object.assign(Object.assign({},s.CodeEditor.defaultConfig),{mode:"null",theme:"jupyter",smartIndent:true,electricChars:true,keyMap:"default",extraKeys:null,gutters:[],fixedGutter:true,showCursorWhenSelecting:false,coverGutterNextToScrollbar:false,dragDrop:true,lineSeparator:null,scrollbarStyle:"native",lineWiseCopyCut:true,scrollPastEnd:false,styleActiveLine:false,styleSelectedText:true,selectionPointer:false,rulers:[],foldGutter:false,handlePaste:true});function t(e,t){u().commands[e]=t}e.addCommand=t})(de||(de={}));var ce;(function(e){function t(e,t){const{autoClosingBrackets:o,fontFamily:i,fontSize:n,insertSpaces:s,lineHeight:r,lineWrap:a,wordWrapColumn:l,tabSize:d,readOnly:c}=t,h=ee(t,["autoClosingBrackets","fontFamily","fontSize","insertSpaces","lineHeight","lineWrap","wordWrapColumn","tabSize","readOnly"]);const m=Object.assign({autoCloseBrackets:o?{}:false,indentUnit:d,indentWithTabs:!s,lineWrapping:a==="off"?false:true,readOnly:c},h);return u()((t=>{if(i){t.style.fontFamily=i}if(n){t.style.fontSize=n+"px"}if(r){t.style.lineHeight=r.toString()}if(c){t.classList.add(oe)}if(a==="wordWrapColumn"){const e=t.querySelector(".CodeMirror-lines");e.style.width=`${l}ch`}if(a==="bounded"){const e=t.querySelector(".CodeMirror-lines");e.style.maxWidth=`${l}ch`}e.appendChild(t)}),m)}e.createEditor=t;function o(e){const t=e.getDoc();const o=t.getCursor("from");const i=t.getCursor("to");const s=!n(o,i);if(s){u().commands.indentMore(e);return}const r=t.getLine(o.line);const a=r.slice(0,o.ch);if(/^\s*$/.test(a)){u().commands.indentMore(e)}else{if(e.getOption("indentWithTabs")){u().commands.insertTab(e)}else{u().commands.insertSoftTab(e)}}}e.indentMoreOrinsertTab=o;function i(e){var t;const o=e.getDoc();const i=(t=e.getOption("indentUnit"))!==null&&t!==void 0?t:2;const s=o.listSelections();for(let r=s.length-1;r>=0;r--){const t=s[r].head;const a=s[r].anchor;const l=!n(t,a);if(l){o.replaceRange("",a,t)}else{const n=o.getLine(t.line).substring(0,t.ch);if(n.match(/^\ +$/)!==null){const e=(Math.ceil(t.ch/i)-1)*i;const n=u().Pos(t.line,e);o.replaceRange("",n,t)}else{const i=e.findPosH(t,-1,"char",false);o.replaceRange("",i,t)}}}}e.delSpaceToPrevTabStop=i;function n(e,t){return e.line===t.line&&e.ch===t.ch}e.posEq=n;function s(e){const t={"CodeMirror-linenumbers":"lineNumbers","CodeMirror-foldgutter":"codeFolding"};return Object.keys(t).filter((o=>e[t[o]]))}function r(e,t,o,i){const n=e.getWrapperElement();switch(t){case"cursorBlinkRate":e.setOption(t,o);break;case"lineWrap":{const t=o==="off"?false:true;const s=n.querySelector(".CodeMirror-lines");const r=o==="bounded"?`${i.wordWrapColumn}ch`:null;const a=o==="wordWrapColumn"?`${i.wordWrapColumn}ch`:null;s.style.setProperty("max-width",r);s.style.setProperty("width",a);e.setOption("lineWrapping",t);break}case"wordWrapColumn":{const{lineWrap:e}=i;if(e==="wordWrapColumn"||e==="bounded"){const t=n.querySelector(".CodeMirror-lines");const i=e==="wordWrapColumn"?"width":"maxWidth";t.style[i]=`${o}ch`}break}case"tabSize":e.setOption("indentUnit",o);break;case"insertSpaces":e.setOption("indentWithTabs",!o);break;case"autoClosingBrackets":e.setOption("autoCloseBrackets",o);break;case"rulers":{const t=o;e.setOption("rulers",t.map((e=>({column:e,className:"jp-CodeMirror-ruler"}))));break}case"readOnly":n.classList.toggle(oe,o);e.setOption(t,o);break;case"fontFamily":n.style.fontFamily=o;break;case"fontSize":n.style.setProperty("font-size",o?o+"px":null);break;case"lineHeight":n.style.lineHeight=o?o.toString():null;break;case"gutters":e.setOption(t,s(i));break;case"lineNumbers":e.setOption(t,o);e.setOption("gutters",s(i));break;case"codeFolding":e.setOption("foldGutter",o);e.setOption("gutters",s(i));break;case"showTrailingSpace":e.setOption(t,o);break;default:e.setOption(t,o);break}}e.setOption=r})(ce||(ce={}));de.addCommand("delSpaceToPrevTabStop",ce.delSpaceToPrevTabStop);de.addCommand("indentMoreOrinsertTab",ce.indentMoreOrinsertTab);class he{constructor(e={},t){this.newInlineEditor=e=>{e.host.dataset.type="inline";return new de(Object.assign(Object.assign({},e),{config:Object.assign(Object.assign({},this.inlineCodeMirrorConfig),e.config||{}),translator:this.translator}))};this.newDocumentEditor=e=>{e.host.dataset.type="document";return new de(Object.assign(Object.assign({},e),{config:Object.assign(Object.assign({},this.documentCodeMirrorConfig),e.config||{}),translator:this.translator}))};this.translator=t||i.nullTranslator;this.inlineCodeMirrorConfig=Object.assign(Object.assign(Object.assign({},de.defaultConfig),{extraKeys:{"Cmd-Right":"goLineRight",End:"goLineRight","Cmd-Left":"goLineLeft",Tab:"indentMoreOrinsertTab","Shift-Tab":"indentLess","Cmd-/":e=>e.toggleComment({indent:true}),"Ctrl-/":e=>e.toggleComment({indent:true}),"Ctrl-G":"find","Cmd-G":"find"}}),e);this.documentCodeMirrorConfig=Object.assign(Object.assign(Object.assign({},de.defaultConfig),{extraKeys:{Tab:"indentMoreOrinsertTab","Shift-Tab":"indentLess","Cmd-/":e=>e.toggleComment({indent:true}),"Ctrl-/":e=>e.toggleComment({indent:true}),"Shift-Enter":()=>{}},lineNumbers:true,scrollPastEnd:true}),e)}}class ue{getMimeTypeByLanguage(e){const t=e.file_extension||"";return X.findBest(e.codemirror_mode||{mimetype:e.mimetype,name:e.name,ext:[t.split(".").slice(-1)[0]]}).mime}getMimeTypeByFilePath(e){const t=F.PathExt.extname(e);if(t===".ipy"){return"text/x-python"}else if(t===".md"){return"text/x-ipythongfm"}const o=X.findByFileName(e)||X.findBest("");return o.mime}}var me=o(10314);var fe=o(61389);var ge=o(2411);var pe=o.n(ge);function ye(e){return pe().createElement(me.TextItem,{source:e.mode,onClick:e.handleClick})}class _e extends n.VDomRenderer{constructor(e){super(new _e.Model);this._handleClick=()=>{const e=new fe.Menu({commands:this._commands});const t="codemirror:change-mode";if(this._popup){this._popup.dispose()}X.getModeInfo().sort(((e,t)=>{const o=e.name||"";const i=t.name||"";return o.localeCompare(i)})).forEach((o=>{if(o.mode.indexOf("brainf")===0){return}const i={insertSpaces:true,name:o.name};e.addItem({command:t,args:i})}));this._popup=(0,me.showPopup)({body:e,anchor:this,align:"left"})};this._popup=null;this._commands=e.commands;this.translator=e.translator||i.nullTranslator;const t=this.translator.load("jupyterlab");this.addClass(me.interactiveItem);this.title.caption=t.__("Change text editor syntax highlighting")}render(){if(!this.model){return null}return pe().createElement(ye,{mode:this.model.mode,handleClick:this._handleClick})}}(function(e){class t extends n.VDomModel{constructor(){super(...arguments);this._onMIMETypeChange=(e,t)=>{const o=this._mode;const i=X.findByMIME(t.newValue);this._mode=i.name||i.mode;this._triggerChange(o,this._mode)};this._mode="";this._editor=null}get mode(){return this._mode}get editor(){return this._editor}set editor(e){const t=this._editor;if(t!==null){t.model.mimeTypeChanged.disconnect(this._onMIMETypeChange)}const o=this._mode;this._editor=e;if(this._editor===null){this._mode=""}else{const e=X.findByMIME(this._editor.model.mimeType);this._mode=e.name||e.mode;this._editor.model.mimeTypeChanged.connect(this._onMIMETypeChange)}this._triggerChange(o,this._mode)}_triggerChange(e,t){if(e!==t){this.stateChanged.emit(void 0)}}}e.Model=t})(_e||(_e={}));const ve=new a.Token("@jupyterlab/codemirror:ICodeMirror");const Ce={factoryService:new he,mimeTypeService:new ue}}}]);